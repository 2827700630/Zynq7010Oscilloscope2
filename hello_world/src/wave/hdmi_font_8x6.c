/* ------------------------------------------------------------ */
/*           HDMI优化字库 - 从STM32 ascii_8x6转换而来            */
/* ------------------------------------------------------------ */

#include "hdmi_font_8x6.h"
#include <string.h>

/* ASCII字符映射表 - 按原STM32字库顺序 */
const char hdmi_ascii_chars[] = " !\"#$%&'()*+,-./"
                               "0123456789:;<=>?"
                               "@ABCDEFGHIJKLMNO"
                               "PQRSTUVWXYZ[\\]^_"
                               "`abcdefghijklmno"
                               "pqrstuvwxyz{|}~";

/* 
 * HDMI优化8x6点阵字库
 * 
 * 转换说明：
 * - 原STM32格式：列行式，每个字符6字节，每字节代表一列8像素，低位在下
 * - HDMI格式：行列式，每个字符8字节，每字节代表一行6像素，低位在左
 * 
 * 转换算法：
 * 对于每个字符的第i行（0-7）：
 *   从原格式6列中提取第i位，组成新的字节
 *   bit0=col0[i], bit1=col1[i], ..., bit5=col5[i]
 */
const u8 hdmi_font_8x6[][8] = {
    /* space (32) - 原:{0x00, 0x00, 0x00, 0x00, 0x00, 0x00} */
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
    
    /* ! (33) - 原:{0x00, 0x00, 0x00, 0x2f, 0x00, 0x00} */
    {0x00, 0x00, 0x00, 0x08, 0x08, 0x08, 0x00, 0x08},
    
    /* " (34) - 原:{0x00, 0x00, 0x07, 0x00, 0x07, 0x00} */
    {0x00, 0x00, 0x14, 0x14, 0x00, 0x00, 0x00, 0x00},
    
    /* # (35) - 原:{0x00, 0x14, 0x7f, 0x14, 0x7f, 0x14} */
    {0x00, 0x14, 0x14, 0x3e, 0x14, 0x3e, 0x14, 0x14},
    
    /* $ (36) - 原:{0x00, 0x24, 0x2a, 0x7f, 0x2a, 0x12} */
    {0x00, 0x08, 0x1e, 0x09, 0x1e, 0x20, 0x1e, 0x08},
    
    /* % (37) - 原:{0x00, 0x62, 0x64, 0x08, 0x13, 0x23} */
    {0x00, 0x06, 0x26, 0x10, 0x08, 0x04, 0x32, 0x30},
    
    /* & (38) - 原:{0x00, 0x36, 0x49, 0x55, 0x22, 0x50} */
    {0x00, 0x0c, 0x12, 0x0c, 0x16, 0x21, 0x21, 0x1e},
    
    /* ' (39) - 原:{0x00, 0x00, 0x05, 0x03, 0x00, 0x00} */
    {0x00, 0x00, 0x08, 0x04, 0x00, 0x00, 0x00, 0x00},
    
    /* ( (40) - 原:{0x00, 0x00, 0x1c, 0x22, 0x41, 0x00} */
    {0x00, 0x10, 0x08, 0x04, 0x04, 0x04, 0x08, 0x10},
    
    /* ) (41) - 原:{0x00, 0x00, 0x41, 0x22, 0x1c, 0x00} */
    {0x00, 0x04, 0x08, 0x10, 0x10, 0x10, 0x08, 0x04},
    
    /* * (42) - 原:{0x00, 0x14, 0x08, 0x3E, 0x08, 0x14} */
    {0x00, 0x00, 0x08, 0x2a, 0x1c, 0x2a, 0x08, 0x00},
    
    /* + (43) - 原:{0x00, 0x08, 0x08, 0x3E, 0x08, 0x08} */
    {0x00, 0x00, 0x08, 0x08, 0x3e, 0x08, 0x08, 0x00},
    
    /* , (44) - 原:{0x00, 0x00, 0x00, 0xA0, 0x60, 0x00} */
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x0c},
    
    /* - (45) - 原:{0x00, 0x08, 0x08, 0x08, 0x08, 0x08} */
    {0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x00},
    
    /* . (46) - 原:{0x00, 0x00, 0x60, 0x60, 0x00, 0x00} */
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18},
    
    /* / (47) - 原:{0x00, 0x20, 0x10, 0x08, 0x04, 0x02} */
    {0x00, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01, 0x00},
    
    /* 0 (48) - 原:{0x00, 0x3E, 0x51, 0x49, 0x45, 0x3E} */
    {0x00, 0x1c, 0x22, 0x32, 0x2a, 0x26, 0x22, 0x1c},
    
    /* 1 (49) - 原:{0x00, 0x00, 0x42, 0x7F, 0x40, 0x00} */
    {0x00, 0x08, 0x0c, 0x08, 0x08, 0x08, 0x08, 0x1c},
    
    /* 2 (50) - 原:{0x00, 0x42, 0x61, 0x51, 0x49, 0x46} */
    {0x00, 0x1c, 0x22, 0x20, 0x18, 0x04, 0x02, 0x3e},
    
    /* 3 (51) - 原:{0x00, 0x21, 0x41, 0x45, 0x4B, 0x31} */
    {0x00, 0x1c, 0x22, 0x20, 0x18, 0x20, 0x22, 0x1c},
    
    /* 4 (52) - 原:{0x00, 0x18, 0x14, 0x12, 0x7F, 0x10} */
    {0x00, 0x10, 0x18, 0x14, 0x12, 0x3e, 0x10, 0x10},
    
    /* 5 (53) - 原:{0x00, 0x27, 0x45, 0x45, 0x45, 0x39} */
    {0x00, 0x3e, 0x02, 0x1e, 0x20, 0x20, 0x22, 0x1c},
    
    /* 6 (54) - 原:{0x00, 0x3C, 0x4A, 0x49, 0x49, 0x30} */
    {0x00, 0x18, 0x04, 0x02, 0x1e, 0x22, 0x22, 0x1c},
    
    /* 7 (55) - 原:{0x00, 0x01, 0x71, 0x09, 0x05, 0x03} */
    {0x00, 0x3e, 0x20, 0x10, 0x08, 0x04, 0x04, 0x04},
    
    /* 8 (56) - 原:{0x00, 0x36, 0x49, 0x49, 0x49, 0x36} */
    {0x00, 0x1c, 0x22, 0x22, 0x1c, 0x22, 0x22, 0x1c},
    
    /* 9 (57) - 原:{0x00, 0x06, 0x49, 0x49, 0x29, 0x1E} */
    {0x00, 0x1c, 0x22, 0x22, 0x3c, 0x20, 0x10, 0x0c},
    
    /* : (58) - 原:{0x00, 0x00, 0x36, 0x36, 0x00, 0x00} */
    {0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00},
    
    /* ; (59) - 原:{0x00, 0x00, 0x56, 0x36, 0x00, 0x00} */
    {0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x0c, 0x06},
    
    /* < (60) - 原:{0x00, 0x08, 0x14, 0x22, 0x41, 0x00} */
    {0x00, 0x20, 0x10, 0x08, 0x04, 0x08, 0x10, 0x20},
    
    /* = (61) - 原:{0x00, 0x14, 0x14, 0x14, 0x14, 0x14} */
    {0x00, 0x00, 0x3e, 0x00, 0x00, 0x3e, 0x00, 0x00},
    
    /* > (62) - 原:{0x00, 0x00, 0x41, 0x22, 0x14, 0x08} */
    {0x00, 0x04, 0x08, 0x10, 0x20, 0x10, 0x08, 0x04},
    
    /* ? (63) - 原:{0x00, 0x02, 0x01, 0x51, 0x09, 0x06} */
    {0x00, 0x1c, 0x22, 0x20, 0x10, 0x08, 0x00, 0x08},
    
    /* @ (64) - 原:{0x00, 0x32, 0x49, 0x59, 0x51, 0x3E} */
    {0x00, 0x1c, 0x22, 0x2a, 0x3a, 0x1a, 0x02, 0x1c},
    
    /* A (65) - 原:{0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C} */
    {0x00, 0x08, 0x14, 0x22, 0x22, 0x3e, 0x22, 0x22},
    
    /* B (66) - 原:{0x00, 0x7F, 0x49, 0x49, 0x49, 0x36} */
    {0x00, 0x1e, 0x22, 0x22, 0x1e, 0x22, 0x22, 0x1e},
    
    /* C (67) - 原:{0x00, 0x3E, 0x41, 0x41, 0x41, 0x22} */
    {0x00, 0x1c, 0x22, 0x02, 0x02, 0x02, 0x22, 0x1c},
    
    /* D (68) - 原:{0x00, 0x7F, 0x41, 0x41, 0x22, 0x1C} */
    {0x00, 0x1e, 0x22, 0x22, 0x22, 0x22, 0x22, 0x1e},
    
    /* E (69) - 原:{0x00, 0x7F, 0x49, 0x49, 0x49, 0x41} */
    {0x00, 0x3e, 0x02, 0x02, 0x1e, 0x02, 0x02, 0x3e},
    
    /* F (70) - 原:{0x00, 0x7F, 0x09, 0x09, 0x09, 0x01} */
    {0x00, 0x3e, 0x02, 0x02, 0x1e, 0x02, 0x02, 0x02},
    
    /* G (71) - 原:{0x00, 0x3E, 0x41, 0x49, 0x49, 0x7A} */
    {0x00, 0x1c, 0x22, 0x02, 0x32, 0x22, 0x22, 0x1c},
    
    /* H (72) - 原:{0x00, 0x7F, 0x08, 0x08, 0x08, 0x7F} */
    {0x00, 0x22, 0x22, 0x22, 0x3e, 0x22, 0x22, 0x22},
    
    /* I (73) - 原:{0x00, 0x00, 0x41, 0x7F, 0x41, 0x00} */
    {0x00, 0x1c, 0x08, 0x08, 0x08, 0x08, 0x08, 0x1c},
    
    /* J (74) - 原:{0x00, 0x20, 0x40, 0x41, 0x3F, 0x01} */
    {0x00, 0x30, 0x10, 0x10, 0x10, 0x12, 0x12, 0x0c},
    
    /* K (75) - 原:{0x00, 0x7F, 0x08, 0x14, 0x22, 0x41} */
    {0x00, 0x22, 0x12, 0x0a, 0x06, 0x0a, 0x12, 0x22},
    
    /* L (76) - 原:{0x00, 0x7F, 0x40, 0x40, 0x40, 0x40} */
    {0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x3e},
    
    /* M (77) - 原:{0x00, 0x7F, 0x02, 0x0C, 0x02, 0x7F} */
    {0x00, 0x22, 0x36, 0x2a, 0x2a, 0x22, 0x22, 0x22},
    
    /* N (78) - 原:{0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F} */
    {0x00, 0x22, 0x26, 0x2a, 0x32, 0x22, 0x22, 0x22},
    
    /* O (79) - 原:{0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E} */
    {0x00, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x22, 0x1c},
    
    /* P (80) - 原:{0x00, 0x7F, 0x09, 0x09, 0x09, 0x06} */
    {0x00, 0x1e, 0x22, 0x22, 0x1e, 0x02, 0x02, 0x02},
    
    /* Q (81) - 原:{0x00, 0x3E, 0x41, 0x51, 0x21, 0x5E} */
    {0x00, 0x1c, 0x22, 0x22, 0x22, 0x2a, 0x12, 0x2c},
    
    /* R (82) - 原:{0x00, 0x7F, 0x09, 0x19, 0x29, 0x46} */
    {0x00, 0x1e, 0x22, 0x22, 0x1e, 0x0a, 0x12, 0x22},
    
    /* S (83) - 原:{0x00, 0x46, 0x49, 0x49, 0x49, 0x31} */
    {0x00, 0x1c, 0x22, 0x02, 0x1c, 0x20, 0x22, 0x1c},
    
    /* T (84) - 原:{0x00, 0x01, 0x01, 0x7F, 0x01, 0x01} */
    {0x00, 0x3e, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08},
    
    /* U (85) - 原:{0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F} */
    {0x00, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x1c},
    
    /* V (86) - 原:{0x00, 0x1F, 0x20, 0x40, 0x20, 0x1F} */
    {0x00, 0x22, 0x22, 0x22, 0x14, 0x14, 0x08, 0x08},
    
    /* W (87) - 原:{0x00, 0x3F, 0x40, 0x38, 0x40, 0x3F} */
    {0x00, 0x22, 0x22, 0x2a, 0x2a, 0x2a, 0x36, 0x22},
    
    /* X (88) - 原:{0x00, 0x63, 0x14, 0x08, 0x14, 0x63} */
    {0x00, 0x22, 0x14, 0x08, 0x08, 0x14, 0x22, 0x22},
    
    /* Y (89) - 原:{0x00, 0x07, 0x08, 0x70, 0x08, 0x07} */
    {0x00, 0x22, 0x14, 0x08, 0x08, 0x08, 0x08, 0x08},
    
    /* Z (90) - 原:{0x00, 0x61, 0x51, 0x49, 0x45, 0x43} */
    {0x00, 0x3e, 0x20, 0x10, 0x08, 0x04, 0x02, 0x3e},
    
    /* [ (91) - 原:{0x00, 0x00, 0x7F, 0x41, 0x41, 0x00} */
    {0x00, 0x1e, 0x02, 0x02, 0x02, 0x02, 0x02, 0x1e},
    
    /* \ (92) - 原:{0x00, 0x55, 0x2A, 0x55, 0x2A, 0x55} */
    {0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x00},
    
    /* ] (93) - 原:{0x00, 0x00, 0x41, 0x41, 0x7F, 0x00} */
    {0x00, 0x1e, 0x10, 0x10, 0x10, 0x10, 0x10, 0x1e},
    
    /* ^ (94) - 原:{0x00, 0x04, 0x02, 0x01, 0x02, 0x04} */
    {0x00, 0x08, 0x14, 0x22, 0x00, 0x00, 0x00, 0x00},
    
    /* _ (95) - 原:{0x00, 0x40, 0x40, 0x40, 0x40, 0x40} */
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e},
    
    /* ` (96) - 原:{0x00, 0x00, 0x01, 0x02, 0x04, 0x00} */
    {0x00, 0x04, 0x08, 0x10, 0x00, 0x00, 0x00, 0x00},
    
    /* a (97) - 原:{0x00, 0x20, 0x54, 0x54, 0x54, 0x78} */
    {0x00, 0x00, 0x1c, 0x20, 0x3c, 0x22, 0x22, 0x3c},
    
    /* b (98) - 原:{0x00, 0x7F, 0x48, 0x44, 0x44, 0x38} */
    {0x00, 0x02, 0x02, 0x1e, 0x22, 0x22, 0x22, 0x1e},
    
    /* c (99) - 原:{0x00, 0x38, 0x44, 0x44, 0x44, 0x20} */
    {0x00, 0x00, 0x1c, 0x22, 0x02, 0x02, 0x22, 0x1c},
    
    /* d (100) - 原:{0x00, 0x38, 0x44, 0x44, 0x48, 0x7F} */
    {0x00, 0x20, 0x20, 0x3c, 0x22, 0x22, 0x22, 0x3c},
    
    /* e (101) - 原:{0x00, 0x38, 0x54, 0x54, 0x54, 0x18} */
    {0x00, 0x00, 0x1c, 0x22, 0x3e, 0x02, 0x02, 0x1c},
    
    /* f (102) - 原:{0x00, 0x08, 0x7E, 0x09, 0x01, 0x02} */
    {0x00, 0x18, 0x04, 0x1e, 0x04, 0x04, 0x04, 0x04},
    
    /* g (103) - 原:{0x00, 0x18, 0xA4, 0xA4, 0xA4, 0x7C} */
    {0x00, 0x00, 0x3c, 0x22, 0x22, 0x3c, 0x20, 0x1c},
    
    /* h (104) - 原:{0x00, 0x7F, 0x08, 0x04, 0x04, 0x78} */
    {0x00, 0x02, 0x02, 0x1e, 0x22, 0x22, 0x22, 0x22},
    
    /* i (105) - 原:{0x00, 0x00, 0x44, 0x7D, 0x40, 0x00} */
    {0x00, 0x08, 0x00, 0x0c, 0x08, 0x08, 0x08, 0x1c},
    
    /* j (106) - 原:{0x00, 0x40, 0x80, 0x84, 0x7D, 0x00} */
    {0x00, 0x10, 0x00, 0x1c, 0x10, 0x10, 0x12, 0x0c},
    
    /* k (107) - 原:{0x00, 0x7F, 0x10, 0x28, 0x44, 0x00} */
    {0x00, 0x02, 0x02, 0x22, 0x12, 0x0e, 0x12, 0x22},
    
    /* l (108) - 原:{0x00, 0x00, 0x41, 0x7F, 0x40, 0x00} */
    {0x00, 0x0c, 0x08, 0x08, 0x08, 0x08, 0x08, 0x1c},
    
    /* m (109) - 原:{0x00, 0x7C, 0x04, 0x18, 0x04, 0x78} */
    {0x00, 0x00, 0x16, 0x2a, 0x2a, 0x2a, 0x22, 0x22},
    
    /* n (110) - 原:{0x00, 0x7C, 0x08, 0x04, 0x04, 0x78} */
    {0x00, 0x00, 0x1e, 0x22, 0x22, 0x22, 0x22, 0x22},
    
    /* o (111) - 原:{0x00, 0x38, 0x44, 0x44, 0x44, 0x38} */
    {0x00, 0x00, 0x1c, 0x22, 0x22, 0x22, 0x22, 0x1c},
    
    /* p (112) - 原:{0x00, 0xFC, 0x24, 0x24, 0x24, 0x18} */
    {0x00, 0x00, 0x1e, 0x22, 0x22, 0x1e, 0x02, 0x02},
    
    /* q (113) - 原:{0x00, 0x18, 0x24, 0x24, 0x18, 0xFC} */
    {0x00, 0x00, 0x3c, 0x22, 0x22, 0x3c, 0x20, 0x20},
    
    /* r (114) - 原:{0x00, 0x7C, 0x08, 0x04, 0x04, 0x08} */
    {0x00, 0x00, 0x1a, 0x06, 0x02, 0x02, 0x02, 0x02},
    
    /* s (115) - 原:{0x00, 0x48, 0x54, 0x54, 0x54, 0x20} */
    {0x00, 0x00, 0x1c, 0x02, 0x1c, 0x20, 0x20, 0x1c},
    
    /* t (116) - 原:{0x00, 0x04, 0x3F, 0x44, 0x40, 0x20} */
    {0x00, 0x04, 0x1e, 0x04, 0x04, 0x04, 0x24, 0x18},
    
    /* u (117) - 原:{0x00, 0x3C, 0x40, 0x40, 0x20, 0x7C} */
    {0x00, 0x00, 0x22, 0x22, 0x22, 0x22, 0x32, 0x2c},
    
    /* v (118) - 原:{0x00, 0x1C, 0x20, 0x40, 0x20, 0x1C} */
    {0x00, 0x00, 0x22, 0x22, 0x14, 0x14, 0x08, 0x08},
    
    /* w (119) - 原:{0x00, 0x3C, 0x40, 0x30, 0x40, 0x3C} */
    {0x00, 0x00, 0x22, 0x22, 0x2a, 0x2a, 0x14, 0x14},
    
    /* x (120) - 原:{0x00, 0x44, 0x28, 0x10, 0x28, 0x44} */
    {0x00, 0x00, 0x22, 0x14, 0x08, 0x08, 0x14, 0x22},
    
    /* y (121) - 原:{0x00, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C} */
    {0x00, 0x00, 0x22, 0x22, 0x22, 0x3c, 0x20, 0x1c},
    
    /* z (122) - 原:{0x00, 0x44, 0x64, 0x54, 0x4C, 0x44} */
    {0x00, 0x00, 0x3e, 0x10, 0x08, 0x04, 0x02, 0x3e},
    
    /* { (123) - 原:{0x14, 0x14, 0x14, 0x14, 0x14, 0x14} */
    {0x00, 0x18, 0x04, 0x04, 0x02, 0x04, 0x04, 0x18},
    
    /* | (124) - 新增 */
    {0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08},
    
    /* } (125) - 新增 */
    {0x00, 0x06, 0x08, 0x08, 0x10, 0x08, 0x08, 0x06},
    
    /* ~ (126) - 新增 */
    {0x00, 0x00, 0x00, 0x2e, 0x1d, 0x00, 0x00, 0x00}
};

/**
 * 获取字符在字库中的索引
 */
int hdmi_get_char_index(char c) {
    const char *pos = strchr(hdmi_ascii_chars, c);
    if (pos != NULL) {
        return (int)(pos - hdmi_ascii_chars);
    }
    return 0; // 返回空格
}
